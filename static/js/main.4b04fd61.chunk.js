(this.webpackJsonpmilestone_inventory=this.webpackJsonpmilestone_inventory||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n(0),o=n.n(a),r=n(11),i=n.n(r),s=(n(91),n(162)),l=n(157),d=n(145),u=n(28),j=n(14),b=(n(92),n(140)),h=Object(a.createContext)(),O=n(66);n(101),n(94);O.a.initializeApp({apiKey:"AIzaSyAy_pqCKw2OwcUxl43ZDBEV30fDHFr1U-c",authDomain:"todo-practice-43b45.firebaseapp.com",projectId:"todo-practice-43b45",storageBucket:"todo-practice-43b45.appspot.com",messagingSenderId:"559432824249",appId:"1:559432824249:web:64990a314be59df3e07268"});var p=O.a,f=n(29),g=n.n(f),x=n(43),m=n(78),v=n(12),y=n(133),w=n(137),C=n(63),A=n(138),S=n(158),k=n(139),D=n(141),N=n(142),I=n(144),E=n(161),U=n(143);var L=function(){var e=Object(a.useContext)(h),t=e.dispatch,n=e.user,o=Object(a.useState)(""),r=Object(v.a)(o,2),i=r[0],s=r[1],l=Object(a.useState)(""),d=Object(v.a)(l,2),u=d[0],j=d[1],O=Object(a.useState)([]),f=Object(v.a)(O,2),L=f[0],M=f[1],P=Object(a.useState)(!1),_=Object(v.a)(P,2),q=_[0],W=_[1],T=function(){var e=Object(x.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),i.length>2&&W(!q);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsx)("form",{autoComplete:"off",children:Object(c.jsxs)(y.a,{children:[Object(c.jsx)(w.a,{children:Object(c.jsx)(C.a,{color:"textSecondary",gutterBottom:!0,children:"Let's plan for a better future !"})}),Object(c.jsxs)(A.a,{children:[Object(c.jsx)(S.a,{fullWidth:!0,required:!0,id:"filled-required",label:"Let's do it! \ud83d\ude09",placeholder:"Enter the goal \ud83c\udfaf",value:i,onChange:function(e){return s(e.target.value)}}),Object(c.jsx)(b.a,{variant:"contained",color:"secondary",type:"submit",onClick:T,children:"GO!"})]}),q&&Object(c.jsx)(y.a,{children:Object(c.jsxs)(w.a,{children:[Object(c.jsx)(C.a,{color:"textSecondary",gutterBottom:!0,children:"Create Milestones for the goal"}),Object(c.jsx)(S.a,{required:!0,id:"filled-required",label:"Milestone",placeholder:"The Milestone.",value:u,onChange:function(e){return j(e.target.value)}}),Object(c.jsx)(b.a,{variant:"contained",color:"secondary",type:"submit",onClick:function(e){e.preventDefault(),u.length>2&&(M([].concat(Object(m.a)(L),[{id:Object(E.a)(),milestone:u,createdAt:Date.now(),completed:!1,completedAt:null}])),j(""))},children:"Add Milestone!"}),L.length>0&&Object(c.jsxs)("div",{children:[Object(c.jsx)(k.a,{children:L.map((function(e,t){return Object(c.jsxs)(D.a,{divider:!0,children:[Object(c.jsx)(N.a,{}),Object(c.jsx)(b.a,{onClick:function(){M(L.filter((function(t){return t!==e})))},children:Object(c.jsx)(U.a,{color:"secondary"})}),t+1," \u2003",Object(c.jsx)(I.a,{primary:e.milestone})]},t)}))}),Object(c.jsx)(b.a,{color:"secondary",onClick:function(){t({type:"ADD_goal",user:n,payload:{goal:i,createdAt:p.firestore.FieldValue.serverTimestamp(),completed:0},milestones:L}),W(!1),s(""),M([])},children:"Fire!"})]})]})})]})})})},M=n(102);var P=function(e){var t,n=e.goal,o=e.serial,r=Object(a.useContext)(h),i=r.dispatch,s=r.user;if(null!==n.createdAt){var l=new Date(n.createdAt.toDate()),j=["January","February","March","April","May","June","July","August","September","October","November","December"][l.getMonth()];t="".concat(l.getHours(),":").concat(l.getMinutes()," - ").concat(l.getDate()," ").concat(j.substring(0,3)," ").concat(l.getFullYear())}return Object(c.jsxs)("div",{className:"goal",children:[Object(c.jsx)(N.a,{}),Object(c.jsxs)("div",{className:"goal-contents",children:[Object(c.jsx)(u.b,{to:"/goals/".concat(n.id),children:Object(c.jsxs)("p",{children:[Object(c.jsxs)("span",{children:[" ",o," -"]})," \xa0",n.goal]})}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(c.jsx)(C.a,{variant:"caption",display:"block",children:null!==n.createdAt&&t}),Object(c.jsx)(b.a,{style:{color:"red"},onClick:function(){return e=n.id,void i({type:"DELETE_goal",payload:{goalId:e,uid:s.uid}});var e},children:Object(c.jsx)(U.a,{color:"secondary"})})]})]}),Object(c.jsx)(d.a,{variant:"determinate",color:"secondary",size:40,thickness:4,value:n.completed})]})};var _=function(){var e=Object(a.useContext)(h).goals;return Object(c.jsx)("div",{className:"goalList",children:Object(c.jsx)(M.a,{elevation:3,children:e.length>0&&e.map((function(e,t){return Object(c.jsx)(P,{goal:e,serial:t+1},e.id)}))||Object(c.jsx)("h3",{children:" You did it champion.."})})})};var q=function(){var e=Object(a.useContext)(h),t=e.user,n=e.setLoading;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("header",{className:"App-header",children:[Object(c.jsxs)("h2",{className:"title",style:{fontSize:"30px"},children:["Hello, ",t.displayName]}),Object(c.jsx)(b.a,{color:"secondary",onClick:function(){n(!0),p.auth().signOut().then((function(){console.log("Sign-out successful."),n(!1)})).catch((function(e){n(!1),console.log("Sign-out error -- "+e)}))},children:"Log Out"})]}),Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("div",{className:"creategoal",children:Object(c.jsx)(L,{})}),Object(c.jsx)("div",{className:"goalList",children:Object(c.jsx)(_,{})})]})]})},W=n(48),T=n(146),z=n(159),B=n(152),F=n(153),J=n(156),V=n(147),R=n(148),G=n(149),H=n(150),Y=n(151),K=n(154),Z=n(155),$=Object(T.a)((function(e){return{paper:{padding:"6px 16px",display:"flex",justifyContent:"space-between",flexDirection:"column"},secondaryTail:{backgroundColor:e.palette.secondary.main}}}));var Q=function(e){var t=e.match,n=Object(a.useContext)(h).goals,r=Object(a.useState)({}),i=Object(v.a)(r,2),s=i[0],l=i[1],u=Object(a.useState)([]),O=Object(v.a)(u,2),f=O[0],m=O[1],y=Object(a.useState)(""),w=Object(v.a)(y,2),A=w[0],k=w[1],D=o.a.useState(!1),N=Object(v.a)(D,2),I=N[0],L=N[1],P=Object(a.useState)(""),_=Object(v.a)(P,2),q=_[0],T=_[1],Q=$(),X=t.params.goalId,ee=p.firestore();Object(a.useEffect)((function(){n.length>0&&l(n.find((function(e){return e.id===X}))),Object.keys(s).length>0&&te({id:s.id})}),[n,s]);var te=function(){var e=Object(x.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.id,ee.collection("milestones").doc(n).onSnapshot((function(e){m(e.data().milestones.map((function(e){return Object(W.a)({},e)})))}),(function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=Object(j.f)(),ce=Boolean(I),ae=ce?"simple-popover":void 0,oe=function(e,t){e.preventDefault(),T(t),L(e.currentTarget)};return 0===Object.keys(s).length?Object(c.jsx)("div",{children:Object(c.jsx)(d.a,{color:"secondary"})}):Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"goalDetail-header",children:[Object(c.jsx)("h1",{style:{color:"white"},children:s.goal}),Object(c.jsx)(d.a,{variant:"determinate",color:"secondary",size:40,thickness:20,value:s.completed})]}),Object(c.jsx)(b.a,{onClick:function(){ne.push("/")},color:"primary",variant:"contained",children:"All Goals"}),Object(c.jsxs)(V.a,{align:"alternate",children:[f.map((function(e,t){return Object(c.jsxs)(R.a,{children:[Object(c.jsx)(G.a,{}),Object(c.jsxs)(H.a,{children:[Object(c.jsxs)(Y.a,{style:e.completedAt?{color:"green"}:{color:"red"},children:[t+1,"\xa0",e.completedAt?Object(c.jsx)(B.a,{}):Object(c.jsx)(F.a,{className:"notCompletedMilestoneIcon"})]}),Object(c.jsx)(K.a,{})]}),Object(c.jsxs)(Z.a,{children:[Object(c.jsxs)(b.a,{onClick:function(t){return oe(t,e.id)},children:[Object(c.jsx)(J.a,{})," Insert Milestone"]}),Object(c.jsxs)(M.a,{elevation:3,className:Q.paper,children:[Object(c.jsx)(C.a,{variant:"h6",component:"h1",children:e.milestone}),Object(c.jsx)(C.a,{variant:"body2",color:"textSecondary",children:e.completedAt&&new Date(e.completedAt).toLocaleString()})]}),Object(c.jsxs)("div",{className:"milestoneOptionsOpposite",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(b.a,{style:{textAlign:"right"},onClick:function(t){return function(e,t){e.preventDefault();var n=f,c=f.findIndex((function(e){return e.id===t}));null===n[c].completedAt?n[c]=Object(W.a)(Object(W.a)({},n[c]),{},{completedAt:Date.now()}):n[c]=Object(W.a)(Object(W.a)({},n[c]),{},{completedAt:null}),ee.collection("milestones").doc(s.id).set({milestones:n})}(t,e.id)},children:"Toggle"}),Object(c.jsx)(b.a,{style:{textAlign:"right"},onClick:function(t){return function(e,t){e.preventDefault();var n=f;n=n.filter((function(e){return e.id!==t})),ee.collection("milestones").doc(s.id).set({milestones:n})}(t,e.id)},children:Object(c.jsx)(U.a,{style:{color:"pink"}})})]}),Object(c.jsx)(C.a,{variant:"body2",color:"textSecondary",children:new Date(e.createdAt).toLocaleString()})]})]})]},e.id)})),Object(c.jsxs)(b.a,{onClick:function(e){return oe(e,-1)},children:[Object(c.jsx)(J.a,{})," Insert Milestone"]})]}),Object(c.jsx)(z.a,{id:ae,open:ce,anchorEl:I,onClose:function(){L(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(c.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(c.jsx)(S.a,{id:"standard-basic",label:"Add Milestone",value:A,onChange:function(e){return k(e.target.value)}}),Object(c.jsx)(b.a,{onClick:function(e){return function(e){e.preventDefault();var t=f,n=f.findIndex((function(e){return e.id===q}));A.length>2&&(-1===q?t.push({id:Object(E.a)(),milestone:A,createdAt:Date.now(),completed:!1,completedAt:null}):(t.splice(n,0,{id:Object(E.a)(),milestone:A,createdAt:Date.now(),completed:!1,completedAt:null}),ee.collection("milestones").doc(s.id).set({milestones:t}))),k(""),L(null)}(e)},children:"Add"})]})})]})},X=n(160);var ee=function(){var e=Object(a.useState)(""),t=Object(v.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),i=Object(v.a)(r,2),s=i[0],l=i[1],d=Object(a.useState)(!1),j=Object(v.a)(d,2),O=j[0],f=j[1],g=Object(a.useContext)(h).setLoading;return Object(c.jsx)("div",{className:"signUp__container",children:Object(c.jsxs)("div",{className:"signUp",children:[Object(c.jsx)("h2",{children:"Sign In"}),Object(c.jsx)(S.a,{required:!0,label:"Email",value:n,onChange:function(e){o(e.target.value),f(!1)}}),Object(c.jsx)(S.a,{required:!0,label:"Password",type:"password",autoComplete:"current-password",value:s,onChange:function(e){l(e.target.value),f(!1)}}),O&&Object(c.jsx)(X.a,{severity:"error",children:"Email or Password is not Correct"}),Object(c.jsx)(b.a,{variant:"contained",color:"primary",type:"submit",onClick:function(e){e.preventDefault(),p.auth().setPersistence(p.auth.Auth.Persistence.LOCAL).then((function(){return g(!0),p.auth().signInWithEmailAndPassword(n,s).then((function(e){console.log(e),f(!1),g(!1)}))})).catch((function(e){g(!1),console.log(e),f(!0)}))},children:"Sign In!"}),Object(c.jsxs)("span",{children:["Create an account?"," ",Object(c.jsx)(u.b,{to:"/signUp",href:"#",children:"SignUp"})]})]})})};var te=function(){var e=Object(a.useContext)(h),t=e.setUser,n=e.setLoading,o=Object(a.useState)(""),r=Object(v.a)(o,2),i=r[0],s=r[1],l=Object(a.useState)(""),d=Object(v.a)(l,2),j=d[0],O=d[1],f=Object(a.useState)(""),g=Object(v.a)(f,2),x=g[0],m=g[1],y=Object(a.useState)(""),w=Object(v.a)(y,2),C=w[0],A=w[1],k=Object(a.useState)(""),D=Object(v.a)(k,2),N=D[0],I=D[1];return Object(c.jsx)("div",{className:"signUp__container",children:Object(c.jsxs)("div",{className:"signUp",children:[Object(c.jsx)("h2",{children:"Sign Up"}),Object(c.jsx)(S.a,{required:!0,label:"Enter Your Name",value:N,onChange:function(e){return I(e.target.value)}}),Object(c.jsx)(S.a,{required:!0,label:"Email",value:i,onChange:function(e){return s(e.target.value)}}),Object(c.jsx)(S.a,{required:!0,label:"Password",type:"password",autoComplete:"current-password",value:j,onChange:function(e){return O(e.target.value)}}),Object(c.jsx)(S.a,{required:!0,label:"Confirm Password",type:"password",value:x,onChange:function(e){return m(e.target.value)}}),""!==C&&Object(c.jsx)(X.a,{severity:"error",children:C}),Object(c.jsx)(b.a,{variant:"contained",color:"primary",type:"submit",onClick:function(e){e.preventDefault(),j===x?(n(!0),p.auth().createUserWithEmailAndPassword(i,j).then((function(e){t(e.user),n(!1),e.user.updateProfile({displayName:N}).then((function(){p.firestore().collection("users").doc(e.user.uid).set({name:N,email:e.user.email,photoUrl:e.user.photoURL,emailVerified:e.user.emailVerified,uid:e.user.uid}),console.log("Collection added")}),(function(e){console.error("displayName add error")})),console.log(e),A("")})).catch((function(e){n(!1),A(e.message),console.log(e)}))):A("Passwords do not match")},children:"Sign UP!"}),Object(c.jsxs)("span",{children:["Already have an account?"," ",Object(c.jsx)(u.b,{to:"/login",href:"#",children:"Sign In"})]})]})})};var ne=function(){var e=Object(a.useContext)(h),t=e.user,n=e.loading;function o(){return null!==t}return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(s.a,{open:n,children:Object(c.jsx)(l.a,{color:"inherit"})}),Object(c.jsx)("h1",{className:"title",children:"Milestone Inventory"}),n&&Object(c.jsx)(d.a,{color:"secondary"}),Object(c.jsxs)(u.a,{children:[Object(c.jsx)(j.b,{exact:!0,path:"/",render:function(){return o()?Object(c.jsx)(q,{}):Object(c.jsx)(j.a,{to:"/login"})}}),Object(c.jsx)(j.b,{path:"/login",render:function(){return o()?Object(c.jsx)(j.a,{to:"/"}):Object(c.jsx)(ee,{})}}),Object(c.jsx)(j.b,{exact:!0,path:"/signUp",render:function(){return o()?Object(c.jsx)(j.a,{to:"/"}):Object(c.jsx)(te,{})}}),Object(c.jsx)(j.b,{path:"/goals/:goalId",component:Q})]})]})},ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var oe="ADD_GOALS",re=p.firestore(),ie=function(e,t){switch(t.type){case oe:return console.log(t.uid),t.goals;case"ADD_goal":var n=re.collection("goals/".concat(t.user.uid,"/goals"));return e.length>0?n.add(t.payload).then((function(e){re.collection("milestones").doc("".concat(e.id)).set({uid:t.user.uid,milestones:t.milestones},{merge:!0}),console.log("Milestone Added")})).catch((function(e){return console.log(e)})):(n.add(t.payload).then((function(e){re.collection("milestones").doc("".concat(e.id)).set({uid:t.user.uid,milestones:t.milestones},{merge:!0})})).catch((function(e){return console.log(e)})),re.collection("goals").doc(t.user.uid).set({displayName:t.user.displayName,email:t.user.email,photoUrl:t.user.photoURL},{merge:!0})),e;case"DELETE_goal":return re.collection("goals").doc(t.payload.uid).collection("goals").doc(t.payload.goalId).delete(),re.collection("milestones").doc(t.payload.goalId).delete(),e;default:return e}};var se=function(e){var t=Object(a.useReducer)(ie,[]),n=Object(v.a)(t,2),o=n[0],r=n[1],i=Object(a.useState)(null),s=Object(v.a)(i,2),l=s[0],d=s[1],u=Object(a.useState)(!1),j=Object(v.a)(u,2),b=j[0],O=j[1];Object(a.useEffect)((function(){O(!0),p.auth().onAuthStateChanged((function(e){e?(d(e),f(e),O(!1)):(O(!1),d(null))}))}),[]);var f=function(){var e=Object(x.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.firestore().collection("goals/".concat(t.uid,"/goals"));case 2:e.sent.onSnapshot((function(e){var n=e.docs.map((function(e){return{id:e.id,goal:e.data().goal,createdAt:e.data().createdAt,milestones:e.data().milestones,completed:e.data().completed}}));r({type:oe,goals:n,uid:t.uid}),O(!1)}),(function(e){O(!1),console.log("Encountered error: ".concat(e))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)(h.Provider,{value:{goals:o,dispatch:r,user:l,setUser:d,loading:b,setLoading:O},children:e.children})};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(se,{children:Object(c.jsx)(ne,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");ce?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ae(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ae(t,e)}))}}()},91:function(e,t,n){},92:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.4b04fd61.chunk.js.map